---
interface Props {
  variant?: 'card' | 'text' | 'circle';
  width?: string;
  height?: string;
  count?: number;
}

const { variant = 'text', width, height, count = 1 } = Astro.props;
---

{
  Array.from({ length: count }).map(() => (
    <div
      class={`skeleton skeleton-${variant}`}
      style={width || height ? `width: ${width}; height: ${height}` : ''}
      aria-hidden="true"
    ></div>
  ))
}

<style>
  /* Base Skeleton Animation */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--color-warm-100) 25%,
      var(--color-warm-50) 50%,
      var(--color-warm-100) 75%
    );
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
    border-radius: var(--radius-md);
  }

  @keyframes skeleton-loading {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  /* Card Skeleton */
  .skeleton-card {
    width: 100%;
    aspect-ratio: 16 / 9;
  }

  /* Text Skeleton */
  .skeleton-text {
    height: 1em;
    width: 100%;
  }

  /* Circle Skeleton */
  .skeleton-circle {
    border-radius: var(--radius-full);
  }

  /* Dark mode */
  [data-theme="dark"] .skeleton {
    background: linear-gradient(
      90deg,
      var(--color-warm-200) 25%,
      var(--color-warm-100) 50%,
      var(--color-warm-200) 75%
    );
    background-size: 200% 100%;
  }

  /* Utility combinations */
  .skeleton-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .skeleton-title {
    height: 1.5em;
    width: 60%;
    margin-bottom: 8px;
  }

  .skeleton-paragraph {
    height: 1em;
    width: 100%;
  }

  .skeleton-paragraph:last-child {
    width: 80%;
  }
</style>
