---
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/Section.astro';
import CTA from '../components/CTA.astro';

const plans = [
  {
    name: "Free",
    price: "무료",
    period: "",
    description: "개인 사용자를 위한 기본 기능",
    features: [
      { text: "기본 3D 설계", included: true },
      { text: "제한된 자재 라이브러리 (20종)", included: true },
      { text: "워터마크 포함 내보내기", included: true },
      { text: "프로젝트 1개 저장", included: true },
      { text: "전체 자재 라이브러리", included: false },
      { text: "고해상도 내보내기", included: false },
      { text: "견적서 PDF 생성", included: false },
      { text: "우선 고객 지원", included: false }
    ],
    cta: "무료로 시작하기",
    ctaLink: "/app",
    highlighted: false
  },
  {
    name: "Pro",
    price: "29,000",
    period: "월",
    description: "시공업체 및 전문가용",
    features: [
      { text: "기본 3D 설계", included: true },
      { text: "전체 자재 라이브러리 (100종+)", included: true },
      { text: "고해상도 내보내기", included: true },
      { text: "무제한 프로젝트 저장", included: true },
      { text: "견적서 PDF 생성", included: true },
      { text: "팀 협업 (3명)", included: true },
      { text: "우선 고객 지원", included: true },
      { text: "API 접근", included: false }
    ],
    cta: "Pro 시작하기",
    ctaLink: "/app?plan=pro",
    highlighted: true
  },
  {
    name: "Enterprise",
    price: "문의",
    period: "",
    description: "대규모 팀 및 기업용",
    features: [
      { text: "Pro의 모든 기능", included: true },
      { text: "화이트라벨 지원", included: true },
      { text: "API 접근", included: true },
      { text: "무제한 팀원", included: true },
      { text: "전담 지원", included: true },
      { text: "맞춤 기능 개발", included: true },
      { text: "온프레미스 설치", included: true },
      { text: "SLA 보장", included: true }
    ],
    cta: "문의하기",
    ctaLink: "/contact",
    highlighted: false
  }
];

const faqs = [
  {
    question: "무료 플랜으로 무엇을 할 수 있나요?",
    answer: "무료 플랜에서는 기본적인 3D 데크 설계, 20종의 자재 라이브러리, 그리고 워터마크가 포함된 내보내기 기능을 사용할 수 있습니다. 개인 사용자가 데크 설계를 체험하기에 충분합니다."
  },
  {
    question: "언제든 플랜을 변경할 수 있나요?",
    answer: "네, 언제든지 플랜을 업그레이드하거나 다운그레이드할 수 있습니다. 업그레이드 시 즉시 새 기능을 사용할 수 있으며, 다운그레이드는 현재 결제 주기가 끝난 후 적용됩니다."
  },
  {
    question: "결제 방법은 어떻게 되나요?",
    answer: "신용카드, 체크카드, 그리고 계좌이체를 지원합니다. Enterprise 플랜은 세금계산서 발행 및 후불 결제도 가능합니다."
  },
  {
    question: "환불 정책은 어떻게 되나요?",
    answer: "결제 후 7일 이내에 환불을 요청하시면 전액 환불해 드립니다. 7일 이후에는 남은 기간에 대한 부분 환불이 가능합니다."
  },
  {
    question: "팀 협업은 어떻게 작동하나요?",
    answer: "Pro 플랜에서는 최대 3명의 팀원을 초대할 수 있습니다. 팀원들은 프로젝트를 함께 열람하고 편집할 수 있으며, 실시간으로 변경사항을 확인할 수 있습니다."
  }
];
---

<BaseLayout title="가격 | 데크센터">
  <section class="hero-banner">
    <div class="hero-content">
      <span class="eyebrow">Pricing</span>
      <h1>합리적인 가격 정책</h1>
      <p>필요한 만큼만 선택하세요. 기본 기능은 무료입니다.</p>
    </div>
  </section>

  <Section>
    <div class="pricing-grid">
      {plans.map(plan => (
        <div class={`pricing-card ${plan.highlighted ? 'highlighted' : ''}`}>
          {plan.highlighted && <span class="popular-badge">인기</span>}
          <h2>{plan.name}</h2>
          <div class="pricing-price">
            {plan.price === "문의" ? (
              <span class="price-text">문의</span>
            ) : (
              <>
                {plan.price !== "무료" && <span class="currency">₩</span>}
                <span class="amount">{plan.price}</span>
                {plan.period && <span class="period">/{plan.period}</span>}
              </>
            )}
          </div>
          <p class="pricing-description">{plan.description}</p>
          <ul class="pricing-features">
            {plan.features.map(feature => (
              <li class={feature.included ? 'included' : 'not-included'}>
                {feature.included ? (
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                ) : (
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                )}
                {feature.text}
              </li>
            ))}
          </ul>
          <a href={plan.ctaLink} class={`pricing-cta ${plan.highlighted ? 'primary' : ''}`}>
            {plan.cta}
          </a>
        </div>
      ))}
    </div>
  </Section>

  <Section title="자주 묻는 질문" description="가격 및 플랜에 대해 궁금한 점을 확인하세요." variant="alt">
    <div class="faq-list">
      {faqs.map(faq => (
        <details class="faq-item">
          <summary>{faq.question}</summary>
          <p>{faq.answer}</p>
        </details>
      ))}
    </div>
  </Section>

  <Section title="더 궁금한 점이 있으신가요?" description="언제든지 문의해 주세요.">
    <div class="contact-cta">
      <CTA text="문의하기" link="/contact" variant="primary" />
    </div>
  </Section>
</BaseLayout>

<style>
  .hero-banner {
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
    padding: 6rem 2rem;
    text-align: center;
    color: white;
  }

  .hero-content {
    max-width: 800px;
    margin: 0 auto;
  }

  .eyebrow {
    display: inline-block;
    font-size: 0.9rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    opacity: 0.9;
    margin-bottom: 1rem;
  }

  .hero-banner h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: white;
  }

  .hero-banner p {
    font-size: 1.25rem;
    opacity: 0.9;
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    max-width: 1100px;
    margin: 0 auto;
  }

  .pricing-card {
    background: white;
    border: 2px solid rgba(0,0,0,0.05);
    border-radius: 20px;
    padding: 2.5rem 2rem;
    text-align: center;
    position: relative;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .pricing-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0, 66, 80, 0.1);
  }

  .pricing-card.highlighted {
    border-color: var(--color-accent);
    box-shadow: 0 8px 32px rgba(0, 66, 80, 0.15);
    transform: scale(1.02);
  }

  .pricing-card.highlighted:hover {
    transform: scale(1.02) translateY(-4px);
  }

  .popular-badge {
    position: absolute;
    top: -14px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--color-accent);
    color: white;
    padding: 0.5rem 1.25rem;
    border-radius: 999px;
    font-size: 0.85rem;
    font-weight: 600;
  }

  .pricing-card h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  .pricing-price {
    margin-bottom: 0.5rem;
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 0.25rem;
  }

  .currency {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-accent);
  }

  .amount {
    font-size: 3rem;
    font-weight: 800;
    color: var(--color-accent);
    line-height: 1;
  }

  .price-text {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--color-accent);
  }

  .period {
    font-size: 1rem;
    color: var(--color-text-light);
  }

  .pricing-description {
    color: var(--color-text-light);
    font-size: 0.95rem;
    margin-bottom: 2rem;
  }

  .pricing-features {
    list-style: none;
    text-align: left;
    margin-bottom: 2rem;
  }

  .pricing-features li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.65rem 0;
    font-size: 0.95rem;
    border-bottom: 1px solid rgba(0,0,0,0.05);
  }

  .pricing-features li:last-child {
    border-bottom: none;
  }

  .pricing-features li.included {
    color: var(--color-text);
  }

  .pricing-features li.included svg {
    color: var(--color-accent);
  }

  .pricing-features li.not-included {
    color: var(--color-text-light);
    opacity: 0.6;
  }

  .pricing-features li.not-included svg {
    color: var(--color-text-light);
  }

  .pricing-cta {
    display: inline-block;
    width: 100%;
    padding: 1rem 2rem;
    border-radius: 8px;
    font-weight: 600;
    text-align: center;
    transition: all 0.3s ease;
    background: var(--color-gray-100);
    color: var(--color-primary);
  }

  .pricing-cta:hover {
    background: var(--color-gray-200);
  }

  .pricing-cta.primary {
    background: var(--color-accent);
    color: white;
  }

  .pricing-cta.primary:hover {
    background: var(--color-accent-light);
  }

  /* FAQ */
  .faq-list {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .faq-item {
    background: white;
    border: 1px solid rgba(0,0,0,0.05);
    border-radius: 12px;
    padding: 0;
    overflow: hidden;
  }

  .faq-item summary {
    padding: 1.25rem 1.5rem;
    font-weight: 600;
    cursor: pointer;
    list-style: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .faq-item summary::-webkit-details-marker {
    display: none;
  }

  .faq-item summary::after {
    content: "+";
    font-size: 1.5rem;
    font-weight: 400;
    color: var(--color-accent);
    transition: transform 0.3s ease;
  }

  .faq-item[open] summary::after {
    transform: rotate(45deg);
  }

  .faq-item p {
    padding: 0 1.5rem 1.25rem;
    color: var(--color-text-light);
    line-height: 1.7;
  }

  .contact-cta {
    text-align: center;
  }

  /* Dark mode */
  :global([data-theme="dark"]) .pricing-card,
  :global([data-theme="dark"]) .faq-item {
    background: var(--color-bg-alt);
    border-color: rgba(255,255,255,0.1);
  }

  :global([data-theme="dark"]) .pricing-cta {
    background: rgba(255,255,255,0.1);
    color: var(--color-text);
  }

  :global([data-theme="dark"]) .pricing-cta:hover {
    background: rgba(255,255,255,0.15);
  }

  :global([data-theme="dark"]) .pricing-features li {
    border-color: rgba(255,255,255,0.05);
  }

  @media (max-width: 1024px) {
    .pricing-grid {
      grid-template-columns: 1fr;
      max-width: 400px;
    }

    .pricing-card.highlighted {
      transform: none;
      order: -1;
    }

    .pricing-card.highlighted:hover {
      transform: translateY(-4px);
    }
  }

  @media (max-width: 768px) {
    .hero-banner h1 {
      font-size: 2.25rem;
    }
  }
</style>
