---
import BaseLayout from '../layouts/BaseLayout.astro';
import Card from '../components/Card.astro';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

const blogPosts: CollectionEntry<'blog'>[] = await getCollection('blog');
const comparisonPosts = blogPosts.filter(post =>
  post.data.tags.includes('소재비교')
);
const guidePosts = blogPosts.filter(post =>
  post.data.tags.includes('가이드')
);
---

<BaseLayout title="비교/가이드 | 데크센터">
  <div class="page-header">
    <h1>비교/가이드</h1>
    <p>데크재 소재 비교, 시공 팁, 유지관리 방법 등 실용적인 가이드를 제공합니다.</p>
  </div>

  <div class="content">
    <section class="section">
      <h2>소재 비교</h2>
      <div class="card-grid">
        {comparisonPosts.map((post) => (
          <Card
            title={post.data.title}
            description={post.data.excerpt}
            image={post.data.cover}
            link={`/blog/${post.slug}`}
          />
        ))}
      </div>
    </section>

    <section class="section">
      <h2>가이드</h2>
      <div class="card-grid">
        {guidePosts.map((post) => (
          <Card
            title={post.data.title}
            description={post.data.excerpt}
            image={post.data.cover}
            link={`/blog/${post.slug}`}
          />
        ))}
      </div>
    </section>

    <section class="section">
      <h2>빠른 링크</h2>
      <ul class="quick-links">
        <li><a href="/blog">모든 블로그 글 보기</a></li>
        <li><a href="/cases">시공사례 보기</a></li>
        <li><a href="/products">제품군 보기</a></li>
      </ul>
    </section>
  </div>
</BaseLayout>

<style>
  .page-header {
    max-width: 1200px;
    margin: 0 auto;
    padding: 3rem 2rem 2rem;
    text-align: center;
  }

  .page-header h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  .page-header p {
    font-size: 1.25rem;
    color: #666;
  }

  .content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }

  .section {
    margin-bottom: 4rem;
  }

  .section h2 {
    margin-bottom: 2rem;
    font-size: 2rem;
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .quick-links {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .quick-links li a {
    display: block;
    padding: 1rem;
    background: var(--color-gray-100);
    border-radius: 8px;
    transition: background 0.2s;
  }

  .quick-links li a:hover {
    background: var(--color-gray-200);
  }
</style>
