---
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/Section.astro';
import CTA from '../components/CTA.astro';

// 갤러리 아이템 - 앱에서 만들 수 있는 디자인 예시
const galleryItems = [
  {
    title: "모던 루프탑 테라스",
    image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&q=80&w=800",
    style: "모던",
    template: "루프탑",
    description: "깔끔한 직선과 그레이톤의 조화"
  },
  {
    title: "숲속 힐링 데크",
    image: "https://images.unsplash.com/photo-1590059392209-799446d3283c?auto=format&fit=crop&q=80&w=800",
    style: "내추럴",
    template: "가든",
    description: "자연과 어우러지는 따뜻한 우드톤"
  },
  {
    title: "미니멀 발코니",
    image: "https://images.unsplash.com/photo-1544033333-722a4667469a?auto=format&fit=crop&q=80&w=800",
    style: "미니멀",
    template: "발코니",
    description: "작은 공간을 넓게 활용하는 설계"
  },
  {
    title: "펜트하우스 프라이빗 덱",
    image: "https://images.unsplash.com/photo-1598928506311-c55ded91a20c?auto=format&fit=crop&q=80&w=800",
    style: "럭셔리",
    template: "테라스",
    description: "프리미엄 자재와 고급 마감"
  },
  {
    title: "전원주택 와이드 데크",
    image: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&q=80&w=800",
    style: "클래식",
    template: "마당",
    description: "넓은 야외 공간을 위한 전통적 디자인"
  },
  {
    title: "카페 테라스",
    image: "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?auto=format&fit=crop&q=80&w=800",
    style: "인더스트리얼",
    template: "상업",
    description: "도시적 감성의 상업 공간"
  },
  {
    title: "풀사이드 선베드 존",
    image: "https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?auto=format&fit=crop&q=80&w=800",
    style: "럭셔리",
    template: "풀데크",
    description: "수영장과 조화로운 리조트 스타일"
  },
  {
    title: "옥상 정원 데크",
    image: "https://images.unsplash.com/photo-1600585154526-990dced4db0d?auto=format&fit=crop&q=80&w=800",
    style: "내추럴",
    template: "루프탑",
    description: "식물과 함께하는 그린 공간"
  },
  {
    title: "모던 계단식 데크",
    image: "https://images.unsplash.com/photo-1600573472591-ee6b68d14c68?auto=format&fit=crop&q=80&w=800",
    style: "모던",
    template: "다층",
    description: "레벨 차이를 활용한 입체적 설계"
  }
];

const filters = {
  styles: ["전체", "모던", "내추럴", "미니멀", "럭셔리", "클래식", "인더스트리얼"]
};
---

<BaseLayout title="갤러리 | 데크센터">
  <section class="hero-banner">
    <div class="hero-content">
      <span class="eyebrow">Gallery</span>
      <h1>디자인 갤러리</h1>
      <p>앱에서 만들 수 있는 다양한 스타일을 둘러보세요</p>
    </div>
  </section>

  <Section>
    <div class="filter-bar">
      <div class="filter-group">
        <label>스타일</label>
        <div class="filter-buttons" data-filter="style">
          {filters.styles.map((style, index) => (
            <button class={index === 0 ? 'active' : ''} data-value={style}>
              {style}
            </button>
          ))}
        </div>
      </div>
    </div>

    <div class="gallery-grid">
      {galleryItems.map(item => (
        <div class="gallery-item" data-style={item.style}>
          <div class="gallery-image">
            <img src={item.image} alt={item.title} loading="lazy" />
            <div class="gallery-overlay">
              <a href="/app" class="template-btn">
                이 템플릿으로 시작
              </a>
            </div>
          </div>
          <div class="gallery-info">
            <h3>{item.title}</h3>
            <p class="gallery-description">{item.description}</p>
            <div class="gallery-meta">
              <span class="style-tag">{item.style}</span>
              <span class="template-badge">{item.template}</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  </Section>

  <Section title="나만의 데크를 설계해보세요" description="갤러리에서 영감을 받으셨나요? 지금 바로 무료로 시작하세요." variant="alt">
    <div class="cta-section">
      <CTA text="무료로 시작하기" link="/app" variant="primary" />
      <p class="cta-note">신용카드 불필요 · 언제든 업그레이드 가능</p>
    </div>
  </Section>
</BaseLayout>

<script>
  function initGalleryFilters() {
    const filterButtons = document.querySelectorAll('.filter-buttons button');
    const galleryItems = document.querySelectorAll('.gallery-item');

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const parent = button.closest('.filter-buttons');
        const filterType = parent?.getAttribute('data-filter');
        const value = button.getAttribute('data-value');

        // Update active state
        parent?.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');

        // Filter items
        galleryItems.forEach(item => {
          if (value === '전체') {
            item.classList.remove('hidden');
          } else {
            const itemValue = item.getAttribute(`data-${filterType}`);
            if (itemValue === value) {
              item.classList.remove('hidden');
            } else {
              item.classList.add('hidden');
            }
          }
        });
      });
    });
  }

  initGalleryFilters();
  document.addEventListener('astro:page-load', initGalleryFilters);
</script>

<style>
  .hero-banner {
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
    padding: 6rem 2rem;
    text-align: center;
    color: white;
  }

  .hero-content {
    max-width: 800px;
    margin: 0 auto;
  }

  .eyebrow {
    display: inline-block;
    font-size: 0.9rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    opacity: 0.9;
    margin-bottom: 1rem;
  }

  .hero-banner h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: white;
  }

  .hero-banner p {
    font-size: 1.25rem;
    opacity: 0.9;
  }

  .filter-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    margin-bottom: 3rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid rgba(0,0,0,0.05);
  }

  .filter-group {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .filter-group label {
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--color-text-light);
  }

  .filter-buttons {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .filter-buttons button {
    padding: 0.5rem 1rem;
    border: 1px solid var(--color-gray-200);
    border-radius: 999px;
    background: white;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .filter-buttons button:hover {
    border-color: var(--color-accent);
    color: var(--color-accent);
  }

  .filter-buttons button.active {
    background: var(--color-accent);
    border-color: var(--color-accent);
    color: white;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 2rem;
  }

  .gallery-item {
    border-radius: 16px;
    overflow: hidden;
    background: white;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
  }

  .gallery-item:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 66, 80, 0.12);
  }

  .gallery-item.hidden {
    display: none;
  }

  .gallery-image {
    position: relative;
    aspect-ratio: 4 / 3;
    overflow: hidden;
  }

  .gallery-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .gallery-item:hover .gallery-image img {
    transform: scale(1.05);
  }

  .gallery-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .gallery-item:hover .gallery-overlay {
    opacity: 1;
  }

  .template-btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    background: white;
    color: var(--color-accent);
    font-weight: 600;
    font-size: 0.9rem;
    text-decoration: none;
    transition: transform 0.2s ease, background 0.2s ease;
  }

  .template-btn:hover {
    transform: scale(1.05);
    background: var(--color-gray-50);
  }

  .gallery-info {
    padding: 1.25rem;
  }

  .gallery-info h3 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .gallery-description {
    font-size: 0.9rem;
    color: var(--color-text-light);
    margin-bottom: 0.75rem;
  }

  .gallery-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .style-tag {
    background: var(--color-accent);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  .template-badge {
    background: var(--color-gray-100);
    color: var(--color-text-light);
    padding: 0.25rem 0.75rem;
    border-radius: 999px;
    font-size: 0.8rem;
  }

  .cta-section {
    text-align: center;
    padding: 3rem;
    background: white;
    border-radius: 20px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.06);
  }

  .cta-note {
    margin-top: 1rem;
    font-size: 0.9rem;
    color: var(--color-text-light);
  }

  /* Dark mode */
  :global([data-theme="dark"]) .filter-buttons button {
    background: var(--color-bg-alt);
    border-color: rgba(255,255,255,0.1);
  }

  :global([data-theme="dark"]) .filter-buttons button:hover {
    border-color: var(--color-accent);
  }

  :global([data-theme="dark"]) .gallery-item {
    background: var(--color-bg-alt);
  }

  :global([data-theme="dark"]) .cta-section {
    background: var(--color-bg-alt);
  }

  :global([data-theme="dark"]) .filter-bar {
    border-color: rgba(255,255,255,0.05);
  }

  :global([data-theme="dark"]) .template-badge {
    background: rgba(255,255,255,0.1);
    color: var(--color-text);
  }

  @media (max-width: 768px) {
    .hero-banner h1 {
      font-size: 2.25rem;
    }

    .filter-bar {
      flex-direction: column;
      gap: 1rem;
    }

    .gallery-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
